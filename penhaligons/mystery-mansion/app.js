!function(){"use strict";var e="undefined"==typeof global?self:global;if("function"!=typeof e.require){var t={},n={},o={},i={}.hasOwnProperty,a=/^\.\.?(\/|$)/,r=function(e,t){for(var n,o=[],i=(a.test(t)?e+"/"+t:t).split("/"),r=0,s=i.length;r<s;r++)n=i[r],".."===n?o.pop():"."!==n&&""!==n&&o.push(n);return o.join("/")},s=function(e){return e.split("/").slice(0,-1).join("/")},d=function(t){return function(n){var o=r(s(t),n);return e.require(o,t)}},u=function(e,t){var o=f&&f.createHot(e),i={id:e,exports:{},hot:o};return n[e]=i,t(i.exports,d(e),i),i.exports},c=function(e){return o[e]?c(o[e]):e},h=function(e,t){return c(r(s(e),t))},l=function(e,o){null==o&&(o="/");var a=c(e);if(i.call(n,a))return n[a].exports;if(i.call(t,a))return u(a,t[a]);throw new Error("Cannot find module '"+e+"' from '"+o+"'")};l.alias=function(e,t){o[t]=e};var m=/\.[^.\/]+$/,p=/\/index(\.[^\/]+)?$/,w=function(e){if(m.test(e)){var t=e.replace(m,"");i.call(o,t)&&o[t].replace(m,"")!==t+"/index"||(o[t]=e)}if(p.test(e)){var n=e.replace(p,"");i.call(o,n)||(o[n]=e)}};l.register=l.define=function(e,o){if(e&&"object"==typeof e)for(var a in e)i.call(e,a)&&l.register(a,e[a]);else t[e]=o,delete n[e],w(e)},l.list=function(){var e=[];for(var n in t)i.call(t,n)&&e.push(n);return e};var f=e._hmr&&new e._hmr(h,l,t,n);l._cache=n,l.hmr=f&&f.wrap,l.brunch=!0,e.require=l}}(),function(){var e;"undefined"==typeof window?this:window;require.register("application.js",function(e,t,n){"use strict";var o=(t("./js/initialLoad/IdbController"),t("./js/initialLoad/SplashScreen")),i=t("./js/animation/IntroOutro"),a=t("./js/shared/preloader"),r=t("./js/initialLoad/ProductScreen"),s=t("./js/mansion/Mansion"),d=t("./js/shared/sound"),u={_name:"App",preloader:a(),beginBt:document.querySelector("#splashScreen #begin"),sound:d,init:function(){var e=this;document.addEventListener("DOMContentLoaded",function(){window.onload=function(){e.handleClick=e.onClick.bind(e),e.beginBt.addEventListener("click",e.handleClick),e.animation=i(e.startScreen.bind(e),e.showProducts.bind(e)),e.sound.init(),e.mansion=s,e.mansion.parent=e,e.splashScreen=o(e.introAnimation.bind(e)),e.preloader.hide(e.splashScreen.intro.play.bind(e.splashScreen.intro))}})},onClick:function(e){this.beginBt.removeEventListener("click",this.handleClick),this.splashScreen.outro.play(),this.sound.play()},introAnimation:function(){this.splashScreen=null,this.removeNode("#splashScreen"),this.animation.intro.play()},startScreen:function(){this.animation.intro=null,this.removeNode("#introAnimation"),this.preloader.show(this.mansion.init.bind(this.mansion))},outroAnimation:function(){this.mansion.stopRender(),this.mansion=null,this.removeNode("#draggable"),this.removeNode("#lockHolder"),this.removeNode(".zoomToggle"),this.animation.outro.play()},showProducts:function(){this.animation=null,r.init()},removeNode:function(e){var t=document.querySelector(e);t.parentNode.removeChild(t)}};n.exports=u}),require.register("js/initialLoad/IdbController.js",function(e,t,n){"use strict";var o=function(){function e(e){a.put(e).then(function(){})["catch"](function(e){"conflict"===e.name?console.log("[PouchDB] conflict",e):console.log("[PouchDB] error",e)})}function n(t){t.preventDefault();var i,a=t.currentTarget.parentNode,s=a.querySelector("input[type=hidden]").value,d=a.querySelector("input[type=email]").value,u=a.querySelector("input[type=checkbox]").checked;if(i=u?"subscribe":"unsubscribed",""!==d&&o(d)){r.removeEventListener("click",n);var c=new FormData(a);fetch("./sendEmails.php",{method:"POST",body:c}).then(function(e){})["catch"](function(t){e({_id:(new Date).toISOString(),email:d,list:s,status:u})})}}var o=t("./../shared/validateEmail"),i=t("pouchdb"),a=new i("emails");navigator.onLine&&a.allDocs({include_docs:!0}).then(function(e){var t=e.rows;t.length>0&&t.forEach(function(e){console.log(e.doc);var t=new FormData;t.append("email",e.doc.email),t.append("list",e.doc.list),t.append("status",e.doc.status),fetch("./sendEmails.php",{method:"POST",body:t}).then(function(t){console.log("[PouchDB] entry then",t,"entry",e.doc)})["catch"](function(e){console.log("[PouchDB] entry",e)})})})["catch"](function(e){console.log("[PouchDB] online error",e)});var r=document.querySelector("#submit");r.addEventListener("click",n);var s=document.querySelector("#submit2");s.addEventListener("click",n)}();n.exports=o}),require.register("js/initialLoad/ProductScreen.js",function(e,t,n){"use strict";var o=t("./../shared/validateEmail"),i={init:function(){TweenMax.to("#productHolder",1,{autoAlpha:1,ease:Power1.easeInOut});var e=document.querySelector("#productHolder .restart");navigator.onLine?e.style.display="none":(e.addEventListener("click",function(){window.location.reload()}),document.querySelector("#productHolder .share").style.display="none");var t=document.querySelector("#submit2");t.addEventListener("click",this.onClick.bind(this))},onClick:function(e){e.preventDefault();var t=document.querySelector("#email2");if(!o(t.value)||""===t.value){var n=new TimelineLite;return n.set(".emailForm > #email2",{borderColor:"red"}),n.fromTo(".emailForm > #email2",.025,{xPercent:-1},{xPercent:1,repeat:5,repeatDelay:.025,yoyo:!0,ease:Linear.easeNone}),void n.set(".emailForm > #email2",{xPercent:0},"+=0.025")}this.sayThanks()},sayThanks:function(){var e=1;TweenMax.to("#productHolder .toHide",e,{autoAlpha:0,ease:Power1.easeInOut}),TweenMax.to("#productHolder .thankYou",e,{autoAlpha:1,ease:Power1.easeInOut})}};n.exports=i}),require.register("js/initialLoad/SplashScreen.js",function(e,t,n){"use strict";var o=function(e){TweenMax.set(["#splashScreen .background > *","#splashScreen .foreground > img"],{xPercent:-50,yPercent:-50});var t=3,n=function(){var e=new TimelineLite({paused:!0,delay:.2});return e.to("#splashScreen",t,{autoAlpha:1,z:.1,ease:Power1.easeInOut},"Start").to([".foreground img"],2*t,{scale:1.1,z:.1,ease:Power1.easeOut},"Start"),e},o=function(){var n=new TimelineLite({onComplete:e,paused:!0});return n.to(".foreground img",.75*t,{scale:1.5,autoAlpha:0,z:.1,ease:Power1.easeIn}),n.to("#splashScreen",.25*t,{autoAlpha:0,ease:Linear.easeNone}),n};return{intro:n(),outro:o()}};n.exports=o}),require.register("js/animation/IntroAnimation.js",function(e,t,n){"use strict";var o=t("./Suspects"),i=function(e){function t(e){return TweenMax.set(e,{yPercent:-50}),TweenMax.from(e,.25*r,{autoAlpha:0,ease:Power1.easeInOut})}function n(e){return TweenMax.to(e,.25*r,{autoAlpha:0})}function i(e,n,o){var i=new TimelineLite;return i.add("Start"),o?(i.fromTo(e,r,{autoAlpha:0},{autoAlpha:1,ease:Power1.easeInOut},"Start"),i.to(e,r+s,{scale:1.25,transformOrigin:o,ease:Linear.easeNone},"Start")):(i.add("Paper","Start"),i.fromTo(e,r,{autoAlpha:0},{autoAlpha:1,ease:Power1.easeInOut},"Paper"),i.to([e,"#introPaper"],r+s,{scale:1.25,transformOrigin:"25% 50%",ease:Linear.easeNone},"Paper"),i.from("#introPaper",.25*r,{rotation:"-=30deg",x:"-=30%",y:"+=80%",ease:Back.easeOut.config(.35)},"Paper+=0.5")),i.add(t(n),"Start"),i}function a(e,t,o){var i=new TimelineLite;return i.add("Out").add(n(t),"Out"),o?i.to(e,.25*r,{autoAlpha:0,ease:Power1.easeInOut},"Out"):i.to([e,"#introPaper"],.25*r,{autoAlpha:0,ease:Power1.easeInOut},"Out"),i}o.init();var r=3,s=9,d=new TimelineMax({onComplete:e,paused:!0}),u="#introBgMask > ellipse";TweenMax.set("#introAnimation .background img",{xPercent:-50,yPercent:-50}),TweenMax.set("#introAnimation .copy",{yPercent:-50}),d.staggerTo(["#staticDecorators","#introAnimation","#introAnimation #next"],1,{autoAlpha:1,ease:Power1.easeInOut},.15).add(i("#introBg1","#c1","25% 50%"),"Card1").addPause().add(a("#introBg1","#c1","25% 50%")).set(u,{attr:{cx:"68%"}}).from("#back",.25*r,{autoAlpha:0,ease:Power1.easeInOut},"Card2").add(i("#introBg2","#c2","75% 50%"),"Card2").addPause().add(a("#introBg2","#c2","75% 50%")).set(u,{attr:{cx:"25%"}}).add(i("#introAnimation #introBg3","#c3"),"Card3").addPause().add(a("#introAnimation #introBg3","#c3")).from("#suspects",.25*r,{autoAlpha:0,ease:Power1.easeInOut},"Card4").add(TweenMax.staggerTo(["#suspects #nextSuspect","#suspects #previousSuspect"],.5,{cycle:{xPercent:[20,-20]},clearProps:"all",ease:Power1.easeInOut,repeat:3,yoyo:!0})).addPause().to("#introAnimation",.25*r,{autoAlpha:0,ease:Power1.easeInOut},"Card5"),d.progress(1,!0).seek(0,!0);var c=d.getLabelsArray(),h=0,l=document.querySelector("#introAnimation .foreground #next");l.addEventListener("click",function(){h++,d.seek(c[h].name),d.play()});var m=document.querySelector("#introAnimation .foreground #back");return m.addEventListener("click",function(){h--,d.seek(c[h].name),d.play()}),d};n.exports=i}),require.register("js/animation/IntroOutro.js",function(e,t,n){"use strict";var o=t("./IntroAnimation"),i=t("./OutroAnimation"),a=function(e,t){return{intro:o(e),outro:i(t)}};n.exports=a}),require.register("js/animation/OutroAnimation.js",function(e,t,n){"use strict";var o=function(e){function t(e){e.stopPropagation(),o.removeEventListener("click",t,!0),a.seek("Questioned").play()}function n(t){t&&t.stopPropagation(),i.removeEventListener("click",n,!0),a.isActive()&&a.pause(),TweenMax.to("#outroAnimation",1,{autoAlpha:0,ease:Power1.easeInOut,onComplete:e})}var o=document.querySelector("#outroAnimation #next"),i=document.querySelector("#outroAnimation #finish");TweenMax.set("#outroAnimation .background img",{xPercent:-50,yPercent:-50}),TweenMax.set("#outroAnimation .copy",{yPercent:-50}),TweenMax.set("#outroAnimation .background .outroPapers",{clearProps:"all"}),CustomEase.create("bounce1","M0,0,C0.578,0.128,0.622,0.94,0.8,1,0.866,0.99,0.946,0.99,1,1");var a=new TimelineLite({onComplete:n});return a.set(["#outroAnimation #outroWill","#outroAnimation #outroBg2"],{autoAlpha:1}),a.from("#outroAnimation",1,{autoAlpha:0,ease:Power1.easeInOut}).set("#canvasHolder",{autoAlpha:0}).call(function(){console.log("git rid of it");var e=document.querySelector("#canvasHolder");e.parentNode.removeChild(e)}).from(["#outroAnimation .midground","#outroAnimation .foreground"],1,{yPercent:-100,ease:"bounce1"},"+=2").set(["#outroAnimation #outroWill"],{autoAlpha:0}),a.addPause().add("Questioned","+=1").set("#outroAnimation .outroPapers",{transformOrigin:"50% 100%",autoAlpha:1},"Questioned"),a.to(["#outroAnimation .midground"],1,{yPercent:-100,ease:Power4.easeIn}).to(["#outroAnimation .background","#outroAnimation .foreground"],1.5,{autoAlpha:1,ease:Power1.easeInOut},"Paper").to(["#outroAnimation .background"],12,{scale:1.125,ease:Linear.easeNone},"Paper").staggerFromTo("#outroAnimation .outroPapers",.5,{cycle:{rotation:["-60deg","60deg"],x:["-=30%","+=30%"]},y:"+=100%"},{cycle:{rotation:["3deg","-6deg","9deg","-8deg"],x:["+=30%","-=30%"]},y:"-=100%"},2,"Paper+=0.75").to("#outroAnimation #finish",1,{autoAlpha:1,ease:Power1.easeInOut},"Paper+=1"),a.progress(1,!0).pause(0,!0),o.addEventListener("click",t,!0),i.addEventListener("click",n,!0),a};n.exports=o}),require.register("js/animation/Suspects.js",function(e,t,n){"use strict";var o=[{title:"The Ruthless Countess Dorothea",description:"A most ferocious matriarch, known for her sharp mind, even sharper wit. Be careful what you say.",url:"./imgs/suspects/dorothea.png"},{title:"Monsieur Beauregard",description:"So suave. So sophisticated. So smooth. Be warned. There’s no going back.",url:"./imgs/suspects/beauregard.png"},{title:"The Uncompromising Sohan",description:"His business relationships have (al)most naturally turned into amicable ties. Everyone has a price.",url:"./imgs/suspects/sohan.png"},{title:"The Bewitching Yasmine",description:"She is by all appearances soft and quiet. She has one’s attention. (Often when one is male).",url:"./imgs/suspects/yasmin.png"},{title:"The Tragedy of Lord George",description:"Deceptively traditional, a perfect reminder that one should be aware of appearances.",url:"./imgs/suspects/george.png"},{title:"The Revenge of Lady Blanche",description:"A social butterfly with a dangerous bite one might say. (Cross her at your peril.) ",url:"./imgs/suspects/blanche.png"}],i={init:function(){this.holder=document.querySelector("#suspects"),this.characters=o,this.ttl=this.characters.length,this.prevIndex=this.ttl,this.index=1,this.nextIndex=2,this.direction=0,this.prevButton=this.holder.querySelector("#previousSuspect"),this.nextButton=this.holder.querySelector("#nextSuspect"),this.populateButtons(),this.addEventListeners()},addFrame:function(){var e="./imgs/suspects/mirrorFrame",t=e+"-1920w.png",n=document.createElement("img");n.setAttribute("src",t),this.holder.querySelector(".frame").appendChild(n)},populateButtons:function(){var e=(this.holder.querySelector(".left .portraits"),this.holder.querySelector(".right h2")),t=this.holder.querySelector(".right .small");this.addFrame();for(var n=0;n<this.ttl;n++){var o=this.holder.querySelector(".portraits .individuals"),i=document.createElementNS("http://www.w3.org/2000/svg","image");i.setAttributeNS("http://www.w3.org/1999/xlink","href",this.characters[n].url),i.setAttributeNS(null,"x",0),i.setAttributeNS(null,"y",0),i.setAttributeNS(null,"width","100%"),i.setAttributeNS(null,"height","100%"),o.appendChild(i),e.innerHTML=e.innerHTML+"<span>"+this.characters[n].title+"</span>",t.innerHTML=t.innerHTML+"<span>"+this.characters[n].description+"</span>"}TweenMax.set(".portraits .individuals image",{autoAlpha:function(e){if(0!==e)return 0}}),TweenMax.set(".right h2 > span",{xPercent:function(e){return-(100*e)},autoAlpha:function(e){if(0!==e)return 0}}),TweenMax.set(".right p > span",{xPercent:function(e){return-(100*e)},autoAlpha:function(e){if(0!==e)return 0}})},addEventListeners:function(){this.prevButton.addEventListener("click",this.onClick.bind(this),!0),this.nextButton.addEventListener("click",this.onClick.bind(this),!0)},onClick:function(e){e.stopPropagation();var t=" :nth-child(0n +"+this.prevIndex+")",n=" :nth-child(0n +"+this.index+")",o=" :nth-child(0n +"+this.nextIndex+")",i=e.currentTarget;i===this.nextButton?this.direction=1:this.direction=-1,this.prevIndex+=this.direction,this.index+=this.direction,this.nextIndex+=this.direction,this.prevIndex>this.ttl&&(this.prevIndex=1),this.index>this.ttl&&(this.index=1),this.nextIndex>this.ttl&&(this.nextIndex=1),this.prevIndex<1&&(this.prevIndex=this.ttl),this.index<1&&(this.index=this.ttl),this.nextIndex<1&&(this.nextIndex=this.ttl);var a=1,r=(100*(this.ttl-1),this.direction);r<0?(TweenMax.to(".right h2"+t,a,{autoAlpha:1}),TweenMax.to(".right h2"+n,a,{autoAlpha:0}),TweenMax.to(".right p"+t,a,{autoAlpha:1}),TweenMax.to(".right p"+n,a,{autoAlpha:0}),TweenMax.to(".portraits .individuals"+t,a,{autoAlpha:1}),TweenMax.to(".portraits .individuals"+n,a,{autoAlpha:0})):(TweenMax.to(".right h2"+n,a,{autoAlpha:0}),TweenMax.to(".right h2"+o,a,{autoAlpha:1}),TweenMax.to(".right p"+n,a,{autoAlpha:0}),TweenMax.to(".right p"+o,a,{autoAlpha:1}),TweenMax.to(".portraits .individuals"+n,a,{autoAlpha:0}),TweenMax.to(".portraits .individuals"+o,a,{autoAlpha:1}))},onOver:function(e){},onOut:function(e){}};n.exports=i}),require.register("js/shared/ImageLoader.js",function(e,t,n){"use strict";var o=function(e){this.count=0};o.prototype.load=function(e,t,n){if(!e||!t)throw"Please provide filenames and holder";this._opts=n||{},0===this.count&&this.showPreloader(),this._opts.callback&&(this.callback=this._opts.callback);var o=document.getElementById(t)||document.querySelector(t),i=Object.prototype.toString.call(e);if("[object Array]"===i){if(!(e.length>0))throw"Empty array";for(var a=0;a<e.length;a++)o.appendChild(this.createImage(e[a]))}else{if("[object String]"!==i)throw"Please enter a string or an array as value";o.appendChild(this.createImage(e))}},o.prototype.createImage=function(e){this.count++;var t=document.createElement("img");return t.onload=this.countReady.bind(this),t.src=this._opts.path?this._opts.path+e:e,t.id=this._opts.id?this._opts.id:e.split("-")[0],t},o.prototype.countReady=function(){this.count--,0===this.count&&this.hidePreloader()},o.prototype.showPreloader=function(){TweenMax.to(".preloader",1,{autoAlpha:1,ease:Power1.easeInOut})},o.prototype.hidePreloader=function(){TweenMax.to(".preloader",1,{autoAlpha:0,ease:Power1.easeInOut,onComplete:this.callback,onCompleteScope:this})},n.exports=o}),require.register("js/shared/assetLoader.js",function(e,t,n){"use strict"}),require.register("js/shared/preloader.js",function(e,t,n){"use strict";var o=function(){var e=function(e,t){return TweenMax.to(e,1,{rotation:360,ease:Linear.easeNone,transformOrigin:t,repeat:-1})},t=new TimelineLite;t.add(e(".preloader #seconds","36% 50%"),0),t.add(e(".preloader #minutes","0% 50%").timeScale(.5),0),t.add(e(".preloader #hours","100% 50%").timeScale(.25),0),t.add(e(".preloader #feathers","50% 50%").timeScale(.125),0);var n=function(e,n){return e&&t.play(),TweenMax.to(".preloader",1,{autoAlpha:e,ease:Power1.easeInOut,onComplete:function(){e||t.pause(),n&&n()}})},o=function(e){return n(1,e)},i=function(e){return n(0,e)};return{show:o,hide:i}};n.exports=o}),require.register("js/shared/sound.js",function(e,t,n){"use strict";var o={track:document.querySelector("audio"),toggle:document.querySelector("#musicToggle"),keepPlaying:!0,isFirstTime:!0,init:function(){this.toggle.addEventListener("click",this.toggleMusic.bind(this)),this.focus=this.shouldPlay.bind(this),this.blur=this.pause.bind(this),this.track.loop=!0},toggleMusic:function(){this.track.paused?(this.play(),this.keepPlaying=!0):(this.pause(),this.keepPlaying=!1)},play:function(){this.isFirstTime&&(this.isFirstTime=!1,window.addEventListener("focus",this.focus),window.addEventListener("blur",this.blur)),this.track.play(),TweenMax.to(this.toggle,.5,{autoAlpha:1,ease:Power1.easeInOut})},pause:function(){this.track.pause(),TweenMax.to(this.toggle,.5,{autoAlpha:.5,ease:Power1.easeInOut})},shouldPlay:function(){this.keepPlaying&&this.play()},outroAnimation:function(){TweenMax.to(this.toggle,1,{autoAlpha:0,ease:Power1.easeInOut,onComplete:function(){this.track.pause(),window.removeEventListener("focus",this.focus),window.removeEventListener("blur",this.blur)},onCompleteScope:this})}};n.exports=o}),require.register("js/shared/validateEmail.js",function(e,t,n){"use strict";var o=function(e){return!e||!!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)};n.exports=o}),require.register("js/mansion/Mansion.js",function(e,t,n){"use strict";var o=t("./threeMansion"),i=t("./riddles"),a=t("./answers"),r={_name:"Mansion",step:0,init:function(){this.count=0,this.preloader=this.parent.preloader,this.handleHideStartScreen=this.hideStartScreen.bind(this),this.bt=document.querySelector("#startScreen #continue"),this.bt.addEventListener("click",this.handleHideStartScreen),o.init(this)},initRiddles:function(){i.init(this)},initAnswers:function(){a.init(this)},showStartScreen:function(){TweenMax.staggerTo(["#startScreen","canvas"],1,{autoAlpha:1,ease:Power1.easeInOut},.5)},hideStartScreen:function(){this.bt.removeEventListener("click",this.handleHideStartScreen),TweenMax.to(["#startScreen","#suspectsVignette"],1,{autoAlpha:0,ease:Power1.easeIn,onComplete:this.introAnimation,onCompleteScope:this})},introAnimation:function(){this.parent.removeNode("#startScreen"),o.startRender(),o.intro.play()},introAnimationComplete:function(){i.introAnimation(),o.enableClick()},handleClick:function(e,t){if(t&&t.length>0){for(var n=0;n<t.length;n++){var r=a.checkHit(t[n]);if(e._name&&"lock"===e._name)return void i.enable();switch(r){case"clue":o.disableClick(),o.childAnimation(t[n],r),i.disable(),a.populate();break;case"locked":i.disable(),a.lock.animateIn();break;case"william":o.disableClick(),o.outroAnimation();break;default:(t[n]||r)&&o.childAnimation(t[n],r)}}5===this.step&&a.lock.stopNag()}},enableRiddles:function(){i.enable()},showAnswer:function(){a.showAnswer()},goToNext:function(){return this.step++,4===this.step?(a.populate(),void a.showAnswer()):(5===this.step&&a.lock.nag(8),o.enableClick(),void i.goToNext())},zoomIntoMansion:function(){o.zoomIn()},shouldHideRiddle:function(){i.showing&&i.animateOut()},stopRender:function(){this.parent.removeNode("#riddlesHolder"),i.remove(),this.parent.removeNode("#answersHolder"),a.remove()}};n.exports=r}),require.register("js/mansion/answers.js",function(e,t,n){"use strict";var o=t("./../shared/validateEmail"),i=t("./lock"),a={_name:"answers",holder:document.querySelector("#answersHolder"),button:document.querySelector("#answersHolder #submit"),content:[{number:"Well done! You've found the first clue.",promo:"As a reward you now have the chance to win the <span>entire Portraits Collection</span>. Enter your email address to win.",copy:"A <span>bottle of poison</span> hidden in the Salon! Who on earth would be in possession of such a thing?","class":".one",name:"Poison"},{number:"Hurrah! You've found another clue.",copy:"William Truthsbury’s <span>Journal</span> is hidden in the <span>The Powder Room</span>. A certain someone spends an awful lot of time in said room…","class":".two",name:"Journal"},{number:"You must be close now!",copy:"You’ve found a <span>secret</span> note hidden in the <span>bells</span>. Is it a code? What could it mean?","class":".three",name:"Note"},{number:"Gosh! Someone has lost their wedding ring.",copy:"How curious. Dropped in the <span>teapot</span> during high tea perhaps?","class":".four",name:"Ring"},{number:"Oh golly, there’s a key there too.",copy:"One must wonder what this will unlock…<br><span>tick tock, tick tock…</span>","class":".five",name:"Key"}],init:function(e,t){this.parent=e,CustomEase.create("bounce2","M0,0,C0.578,0.128,0.622,0.94,0.8,1,0.866,0.99,0.946,0.99,1,1"),this.button.addEventListener("click",this.hideAnswer.bind(this)),this.lock=i,TweenMax.set(this.holder,{yPercent:-115,autoAlpha:1}),this.populate(),this.lock.init(e),this.parent.preloader.hide(this.parent.showStartScreen)},populate:function(){var e=this.parent.step;e-1>=0&&TweenMax.set("#answersHolder .cards "+this.content[e-1]["class"],{autoAlpha:0}),TweenMax.set("#answersHolder .cards "+this.content[e]["class"],{autoAlpha:1});var t=this.holder.querySelector(".form h2");t.innerHTML=this.content[e].number;var n=this.holder.querySelector(".promo");this.content[e].promo&&(n.innerHTML=this.content[e].promo);var o=this.holder.querySelector(".copy");o.innerHTML=this.content[e].copy;var i=this.holder.querySelector(".name");i.innerHTML=this.content[e].name},checkHit:function(e){switch(this.lock.animateOut(),e){case"room02_answer":if(0===this.parent.step)return"clue";break;case"room01_answer":if(1===this.parent.step)return"clue";break;case"room05_answer":if(2===this.parent.step)return"clue";break;case"room03_answer":if(3===this.parent.step)return"clue";break;case"room04_answer":return 5===this.parent.step?"william":"locked"}},showAnswer:function(){TweenMax.to(this.holder,1,{yPercent:0,ease:"bounce2"})},hideAnswer:function(e){if(0!==this.parent.step){if(!(this.parent.step<this.content.length+1))return void TweenMax.to(this.holder,1,{yPercent:-115,ease:Power4.easeIn,onComplete:function(){this.parent.outroAnimation()},onCompleteScope:this});TweenMax.to(this.holder,1,{yPercent:-115,ease:Power4.easeIn,onComplete:this.parent.goToNext,onCompleteScope:this.parent})}else{var t=document.querySelector("#answersHolder #email");if(!o(t.value)){var n=new TimelineLite;return n.set(".emailForm > #email",{borderColor:"red"}),n.fromTo(".emailForm > #email",.025,{xPercent:-1},{xPercent:1,repeat:5,repeatDelay:.025,yoyo:!0,ease:Linear.easeNone}),void n.set(".emailForm > #email",{xPercent:0},"+=0.025")}TweenMax.to(this.holder,1,{yPercent:-115,ease:Power4.easeIn,onComplete:function(){this.parent.goToNext(),TweenMax.set("#answersHolder .offer",{display:"none"}),TweenMax.set("#submit",{attr:{type:"button"}})},onCompleteScope:this})}},enableRiddles:function(){this.parent.enableRiddles()},remove:function(){}};n.exports=a}),require.register("js/mansion/lock.js",function(e,t,n){"use strict";var o={_name:"lock",holder:document.querySelector("#lockHolder"),init:function(e){this.parent=e,this.handleClick=this.onClick.bind(this),this.tween=TweenMax.fromTo("#lockHolder #lockedPendulum",1,{rotation:"-10deg"},{rotation:"10deg",ease:Power1.easeInOut,transformOrigin:"28% 25%",repeat:-1,yoyo:!0,paused:!0})},nag:function(e){this.nagTween=TweenMax.to(this.holder,.3,{autoAlpha:1,delay:e,onComplete:function(){this.holder.addEventListener("click",this.handleClick,!0)},onCompleteScope:this})},stopNag:function(){this.nagTween.pause(0)},onClick:function(e){e.stopPropagation(),this.animateOut()},animateIn:function(){this.tween.play(),TweenMax.to(this.holder,.3,{autoAlpha:1,onComplete:function(){this.holder.addEventListener("click",this.handleClick,!0)},onCompleteScope:this})},animateOut:function(){TweenMax.to(this.holder,.3,{autoAlpha:0,onComplete:function(){this.parent.enableRiddles(),this.tween.pause(),this.holder.removeEventListener("click",this.handleClick,!0)},onCompleteScope:this})}};n.exports=o}),require.register("js/mansion/riddles.js",function(e,t,n){"use strict";var o={_name:"Riddles",holder:document.querySelector("#riddlesHolder div"),hotspot:document.querySelector("#riddlesHolder .card"),showing:!1,firstTime:!0,copy:[".one",".two",".three",".four"],init:function(e){this.parent=e,CustomEase.create("ease","M0,0,C0.282,0,0.203,0.91,0.402,0.998,0.612,1.09,0.798,1,1,1"),this.showRiddle=this.animateIn.bind(this),this.hideRiddle=this.animateOut.bind(this),this.handleClick=this.toggleRiddle.bind(this),this.populate(0),this.enable(),this.parent.initAnswers()},enable:function(){this.hotspot.addEventListener("click",this.handleClick),this.hotspot.addEventListener("mouseenter",this.showRiddle)},disable:function(){this.hotspot.removeEventListener("click",this.handleClick),this.hotspot.removeEventListener("mouseenter",this.showRiddle),this.animateOut()},populate:function(e){var t="#riddlesHolder .card ";e-1>=0&&TweenMax.set(t+this.copy[e-1],{autoAlpha:0}),TweenMax.set(t+this.copy[e],{autoAlpha:1})},goToNext:function(){this.parent.step<this.copy.length?(this.enable(),this.populate(this.parent.step),this.animateIn(),this.firstTime=!0):(this.outroAnimation(),this.parent.zoomIntoMansion())},introAnimation:function(){TweenMax.fromTo(this.holder,1.5,{autoAlpha:0,yPercent:40,xPercent:-20,transformOrigin:"0% 100%"},{yPercent:0,xPercent:0,autoAlpha:1,ease:"ease"}),this.showing=!0},outroAnimation:function(){TweenMax.to(this.holder,.3,{yPercent:50,xPercent:-200,ease:Power2.easeIn}),TweenMax.killTweensOf(this.hotspot),this.showing=!1},animateIn:function(){this.showing||(TweenMax.to(this.holder,1,{yPercent:0,xPercent:0,rotation:0,ease:"ease"}),TweenMax.killTweensOf(this.hotspot),TweenMax.set(this.hotspot,{clearProps:"all"}),this.showing=!0)},animateOut:function(){this.firstTime&&(this.parent.zoomIntoMansion(),this.firstTime=!1),TweenMax.to(this.holder,.5,{yPercent:70,xPercent:-100,rotation:"4deg",ease:Power2.easeInOut,onComplete:this.nag,onCompleteScope:this}),this.showing=!1},nag:function(){this.showing||TweenMax.to(this.hotspot,.25,{xPercent:3,yPercent:-3,ease:Power1.easeInOut,repeat:3,yoyo:!0,repeatDelay:.051,delay:2,onComplete:function(){this.nag()},onCompleteScope:this})},toggleRiddle:function(){this.showing?this.hideRiddle():this.showRiddle()},remove:function(){this.hotspot.removeEventListener("click",this.handleClick),this.hotspot.removeEventListener("mouseenter",this.showRiddle),this.showing=!1,TweenMax.killTweensOf(this.hotspot)}};n.exports=o}),require.register("js/mansion/three/ThreeAnimals.js",function(e,t,n){"use strict";var o=t("./helpers/Bilboard"),i=function(e,t){var n=new THREE.Group,i=o,a="./imgs/mansion/animals/",r=i.create(a+"fox-1920w.png",{width:6,x:7,y:-7,z:16},e,t);n.add(r);var s=i.create(a+"leopard-1920w.png",{width:7,x:-10,y:-6,z:18},e,t);n.add(s);var d=i.create("./imgs/mansion/environment/tree2.png",{width:6,x:-7.1,y:1.27,z:23.9},e,t);n.add(d);var u=i.create(a+"peacock-1920w.png",{width:2.5,x:-6.4,y:.55,z:24},e,t);n.add(u);var c=i.create(a+"stag-1920w.png",{width:6,x:7,y:-2.5,z:24.1},e,t);return n.add(c),n};n.exports=i}),require.register("js/mansion/three/ThreeBackground.js",function(e,t,n){"use strict";var o=t("./helpers/Bilboard"),i=function(e,t){var n=new THREE.Group,i=o,a=e.environment,r=i.create("./imgs/mansion/environment/bg1.gif",{width:6*a.w,ratio:.5,z:-.2},e,t);n.add(r);var s=i.create("./imgs/mansion/environment/bg2.gif",{width:3*a.w,ratio:.5,z:-.1},e,t);return n.add(s),n};n.exports=i}),require.register("js/mansion/three/ThreeClickableItems.js",function(e,t,n){"use strict";var o=t("./rooms/room01"),i=t("./rooms/room02"),a=t("./rooms/room03"),r=t("./rooms/room04"),s=t("./rooms/room05"),d=t("./rooms/room06"),u={init:function(e,t){var n=new THREE.Group;this.room01=o,this.room01.create(e,t),n.add(this.room01.element),this.room02=i,this.room02.create(e,t),n.add(this.room02.element),this.room03=a,this.room03.create(e,t),n.add(this.room03.element),this.room04=r,this.room04.create(e,t),n.add(this.room04.element),this.room05=s,this.room05.create(e,t),n.add(this.room05.element),this.room06=d,this.room06.create(e,t),n.add(this.room06.element),n.position.z=.25,this.elements=n},childAnimation:function(e,t){switch(e){case"room01_dud01":case"room01_dud02":case"room01_dud03":case"room01_dud04":case"room01_dud05":case"room01_dud06":case"room01_answer":this.room01.animate(e,t);break;case"room02_dud01":case"room02_dud02":case"room02_dud03":case"room02_dud04":case"room02_dud05":case"room02_answer":this.room02.animate(e,t);break;case"room03_dud01":case"room03_dud02":case"room03_dud03":case"room03_dud04":case"room03_answer":this.room03.animate(e,t);break;case"room04_dud01":case"room04_dud02":case"room04_dud03":case"room04_dud04":case"room04_dud05":case"room04_answer":this.room04.animate(e,t);break;case"room05_dud01":case"room05_dud02":case"room05_dud03":case"room05_answer":this.room05.animate(e,t);break;case"room06_dud01":case"room06_dud02":case"room06_answer":this.room06.animate(e,t)}},foundWill:function(e,t){this.room04.foundWill(e,t)}};n.exports=u}),require.register("js/mansion/three/ThreeForeground.js",function(e,t,n){"use strict";var o=t("./helpers/Bilboard"),i=function(e,t){var n=new THREE.Group,i=o,a=e.environment,r="./imgs/mansion/environment/",s=i.create(r+"foreground-1024w.png",{width:a.w,ratio:a.h/a.w,y:0,z:24},e,t);n.add(s);var d=i.create(r+"tree1.png",{width:16,ratio:2,x:-20,y:4,z:10},e,t);n.add(d);var u=i.create(r+"tree3.png",{width:14,ratio:2,x:8,y:2,z:20},e,t);n.add(u);var c=i.create(r+"tree4.png",{width:10,ratio:2,x:12,y:0,z:8},e,t);n.add(c);var h=i.create(r+"flowers-1920w.png",{width:a.w,ratio:.5,z:25},e,t);return n.add(h),n};n.exports=i}),require.register("js/mansion/three/ThreeHouse.js",function(e,t,n){"use strict";var o=t("./helpers/Bilboard"),i=(t("./ThreeUserClick"),t("./ThreeClickableItems")),a={init:function(e,t){var n=new THREE.Group;n.name="ThreeHouse";var a=o,r="./imgs/mansion/house/",s=e.environment,d=a.create(r+"background-1920w.png",{name:"mansion",width:s.w,y:.25*s.h,z:.1},e,t);n.add(d),this.clickableElements=i,this.clickableElements.init(e,t),n.add(this.clickableElements.elements),e.userClick=new THREE.UserClick(this.clickableElements.elements.children,e.camera,e.renderer.domElement);var u=a.create(r+"frontLeft-1920w.png",{name:"mansionFrontLeft",width:s.w,y:.25*s.h,z:1},e,t);n.add(u);var c=a.create(r+"frontRight-1920w.png",{name:"mansionFrontRight",width:s.w,y:.25*s.h,z:1},e,t);n.add(c);var h=a.create(r+"mound-1920w.png",{width:.5*s.w,ratio:.25,y:-6.7,z:1.1},e,t);n.add(h),this.elements=n},childAnimation:function(e,t){this.clickableElements.childAnimation(e,t)},foundWill:function(e,t){this.clickableElements.foundWill(e,t)}};n.exports=a}),require.register("js/mansion/three/ThreeRoom.js",function(e,t,n){"use strict";var o=function(){var e=new THREE.Group,t=19.2,n=10.8,o=Math.PI/2,i=new THREE.PlaneBufferGeometry(t,n),a=new THREE.PlaneBufferGeometry(n,n),r=new THREE.TextureLoader,s=r.load("./mansion/room1/wallpaper.png");s.wrapS=s.wrapT=THREE.RepeatWrapping,s.repeat.set(2,2);var d=r.load("./mansion/room1/rug.jpg"),u={floor:new THREE.MeshBasicMaterial({map:d}),walls:new THREE.MeshBasicMaterial({map:s})},c=new THREE.Mesh(i.clone(),u.floor);
c.rotation.x=-o;var h=new THREE.Mesh(i.clone(),u.floor);h.rotation.x=o,h.position.y=n;var l=new THREE.Mesh(i.clone(),u.walls);l.position.y=n/2,l.position.z=-n/2;var m=new THREE.Mesh(a.clone(),u.walls);m.position.y=n/2,m.position.x=-t/2,m.rotation.y=o;var p=new THREE.Mesh(a.clone(),u.walls);return p.position.y=n/2,p.position.x=t/2,p.rotation.y=-o,e.add(c),e.add(h),e.add(l),e.add(m),e.add(p),e};n.exports=o}),require.register("js/mansion/three/ThreeUserClick.js",function(e,t,n){"use strict";THREE.UserClick=function(e,t,n){var o=new THREE.Raycaster;this.click=function(n){o.setFromCamera(n,t);var i=o.intersectObjects(e,!0);if(i.length>0){var a=[];return i.forEach(function(e){a.push(e.object.name)}),a}return null}}}),require.register("js/mansion/three/helpers/Bilboard.js",function(e,t,n){"use strict";var o={create:function(e,t,n,o){var i=t||{},a=new THREE.TextureLoader,r=i.width||1,s=i.ratio||1,d=i.x||0,u=i.y||0,c=i.z||0;this.callback=o,this.parent=n,this.parent.count++;var h=new THREE.PlaneBufferGeometry(r,r*s),l=a.load(e,this.ready.bind(this)),m=new THREE.MeshBasicMaterial({map:l,transparent:!0});i.doubleFace&&(m.side=THREE.DoubleSide);var p=new THREE.Mesh(h,m);return p.position.x=d,p.position.y=u,p.position.z=c,p.name=i.name||"",p},ready:function(){this.parent.countReady(this.callback.bind(this.parent))}};n.exports=o}),require.register("js/mansion/three/helpers/pivotBottomCenter.js",function(e,t,n){"use strict";var o=t("./Bilboard"),i={create:function(e,t,n){var i=t||{},a=o,r=new THREE.Group;r.position.x=i.x||0,r.position.y=i.y||0,i.x=0,i.y=0;var s=a.create(e,i,n);return s.position.y=+(i.width||1)/2*(i.ratio||1),r.add(s),r}};n.exports=i}),require.register("js/mansion/three/helpers/pivotTopCenter.js",function(e,t,n){"use strict";var o=t("./Bilboard"),i={create:function(e,t,n){var i=t||{},a=o,r=new THREE.Group;r.position.x=i.x||0,r.position.y=i.y||0,i.x=0,i.y=0;var s=a.create(e,i,n);return s.position.y=-(i.width||1)/2*(i.ratio||1),r.add(s),r}};n.exports=i}),require.register("js/mansion/three/rooms/room01.js",function(e,t,n){"use strict";var o=t("./room01/riddleAnswer"),i=t("./room01/lipstick"),a=t("./room01/jewels"),r=t("./room01/bedMirror"),s=t("./room01/perfumeSmall"),d=t("./room01/perfumeLarge"),u=(t("./room01/handMirror"),{create:function(e,t){var n=new THREE.Group;this.answer=o({name:"room01_answer",width:1.15,x:-4.9,y:4.55},e,t),n.add(this.answer.element),this.dud01=i({name:"room01_dud01",width:.4,x:-5.5,y:2.2,z:.1},e,t),n.add(this.dud01.element),this.dud02=a({name:"room01_dud02",width:1.4,x:-3.8,y:5,z:.1},e,t),n.add(this.dud02.element),this.dud03=r({name:"room01_dud03",width:.8,x:-3.15,y:4},e,t),n.add(this.dud03.element),this.dud04=s({name:"room01_dud04",width:.8,x:-1.4,y:2.6},e,t),n.add(this.dud04.element),this.dud05=d({name:"room01_dud05",width:.8,x:-2,y:3},e,t),n.add(this.dud05.element),this.element=n},animate:function(e,t){switch(e){case"room01_answer":t&&this.answer.animate();break;case"room01_dud01":this.dud01.animate();break;case"room01_dud02":this.dud02.animate();break;case"room01_dud03":this.dud03.animate();break;case"room01_dud04":this.dud04.animate();break;case"room01_dud05":this.dud05.animate()}}});n.exports=u}),require.register("js/mansion/three/rooms/room01/bedMirror.js",function(e,t,n){"use strict";var o=t("../../helpers/pivotTopCenter"),i=function(e,t){var n=e||{},i=new THREE.Group;i.position.x=n.x||0,i.position.y=n.y||0,i.position.z=n.z||0;var a=o,r="./imgs/mansion/duds/",s=a.create(r+"bedMirror.png",{name:n.name,width:n.width},t);i.add(s);var d=function(){TweenMax.to(s.rotation,.5,{z:Math.PI/8,repeat:1,yoyo:!0})};return{element:i,animate:d}};n.exports=i}),require.register("js/mansion/three/rooms/room01/handMirror.js",function(e,t,n){"use strict";var o=t("../../helpers/Bilboard"),i=function(e,t){var n=e||{},i=new THREE.Group;i.position.x=n.x||0,i.position.y=n.y||0,i.position.z=n.z||0;var a=o,r="./imgs/mansion/duds/",s=a.create(r+"handMirror.png",{name:n.name,width:n.width,ratio:.5},t);i.add(s);var d=function(){var e=.5;TweenMax.to(s.rotation,e,{z:-Math.PI/2.5,repeat:1,yoyo:!0}),TweenMax.to(s.position,e,{x:"+=0.5",y:"+=0.7",repeat:1,yoyo:!0})};return{element:i,animate:d}};n.exports=i}),require.register("js/mansion/three/rooms/room01/jewels.js",function(e,t,n){"use strict";var o=t("../../helpers/pivotTopCenter"),i=function(e,t){var n=e||{},i=new THREE.Group;i.position.x=n.x||0,i.position.y=n.y||0,i.position.z=n.z||0;var a=o,r="./imgs/mansion/duds/",s=a.create(r+"jewel.png",{name:n.name,width:n.width},t);i.add(s);var d=a.create(r+"jewel.png",{name:n.name,width:.6*n.width,x:.3*n.width},t);i.add(d),CustomEase.create("jewelsEase","M0,0,C0.112,0.036,-0.016,1.086,0.2,1,0.367,0.933,0.309,-0.202,0.4,-0.3,0.484,-0.39,0.465,0.104,0.556,0.204,0.63,0.286,0.613,-0.062,0.7,-0.1,0.76,-0.126,0.749,0.075,0.8,0.1,0.842,0.12,0.876,-0.034,0.9,-0.034,0.924,-0.034,0.966,0,1,0");var u=new TimelineLite({paused:!0});u.to([s.rotation,d.rotation],3,{z:function(e){return e%2?.25*Math.PI:.25*-Math.PI},ease:"jewelsEase"});var c=function(){u.isActive()||u.play(0)};return{element:i,animate:c}};n.exports=i}),require.register("js/mansion/three/rooms/room01/lipstick.js",function(e,t,n){"use strict";var o=t("../../helpers/Bilboard"),i=function(e,t){var n=e||{},i=new THREE.Group;i.position.x=n.x||0,i.position.y=n.y||0,i.position.z=n.z||0;var a=o,r="./imgs/mansion/duds/lipstick/",s=4.5,d=n.width*s+.25*n.width,u=a.create(r+"neckBack.png",{name:n.name,width:n.width,ratio:1,y:d},t);i.add(u);var c=a.create(r+"tip.png",{name:n.name,width:n.width,ratio:1,y:d+.75*n.width},t);i.add(c);var h=a.create(r+"neckFront.png",{name:n.name,width:n.width,ratio:1,y:d},t);i.add(h);var l=a.create(r+"body.png",{name:n.name,width:n.width,ratio:s,y:n.width*s*.5},t);i.add(l);var m=new TimelineLite({paused:!0});m.to(c.position,.5,{y:"-="+.75*n.width,ease:Bounce.easeOut}).to([c.position,h.position,u.position],.5,{y:"-="+.75*n.width,ease:Bounce.easeOut}).to(i.position,.5,{y:"+=0.75",ease:Power3.easeOut}).to(i.position,.75,{y:"-=0.75",ease:Bounce.easeOut},"Down").to([c.position,h.position,u.position],.5,{y:"+="+.75*n.width,ease:Power1.easeOut}).to([c.position],.5,{y:"+="+.75*n.width,ease:Power1.easeOut});var p=function(){m.isActive()||m.play(0)};return{element:i,animate:p}};n.exports=i}),require.register("js/mansion/three/rooms/room01/perfumeLarge.js",function(e,t,n){"use strict";var o=t("../../helpers/Bilboard"),i=function(e,t){var n=e||{},i=new THREE.Group;i.position.x=n.x||0,i.position.y=n.y||0,i.position.z=n.z||0;var a=o,r="./imgs/mansion/duds/",s=a.create(r+"perfumeLarge.png",{name:n.name,width:n.width,ratio:2},t);i.add(s);var d=new TimelineLite({paused:!0});d.to(i.position,.5,{y:"+=0.75",ease:Power3.easeOut}).to(i.position,.75,{y:"-=0.75",ease:Bounce.easeOut});var u=function(){d.isActive()||d.play(0)};return{element:i,animate:u}};n.exports=i}),require.register("js/mansion/three/rooms/room01/perfumeSmall.js",function(e,t,n){"use strict";var o=t("../../helpers/Bilboard"),i=function(e,t){var n=e||{},i=new THREE.Group;i.position.x=n.x||0,i.position.y=n.y||0,i.position.z=n.z||0;var a=o,r="./imgs/mansion/duds/",s=a.create(r+"perfumeSmall.png",{name:n.name,width:n.width},t);i.add(s);var d=new TimelineLite({paused:!0});d.to(i.position,.5,{y:"+=0.75",ease:Power3.easeOut}).to(i.position,.75,{y:"-=0.75",ease:Bounce.easeOut});var u=function(){d.isActive()||d.play(0)};return{element:i,animate:u}};n.exports=i}),require.register("js/mansion/three/rooms/room01/riddleAnswer.js",function(e,t,n){"use strict";var o=t("../../helpers/pivotTopCenter"),i=function(e,t){var n=e||{},i=new THREE.Group;i.position.x=n.x||0,i.position.y=n.y||0,i.position.z=n.z||0;var a=o,r="./imgs/mansion/answers/",s=a.create(r+"wallMirror.png",{name:n.name,width:n.width},t);i.add(s);var d=function(){TweenMax.killDelayedCallsTo(l),TweenMax.killDelayedCallsTo(h),c.pause(0),TweenMax.to(s.rotation,1,{z:.3*-Math.PI,ease:Back.easeInOut.config(.75),onComplete:t.zoomCheck,onCompleteScope:t})},u=.05,c=TweenMax.to(i.rotation,u,{z:Math.PI/64,repeat:7,repeatDelay:u,yoyo:!0,paused:!0}),h=function(){c.play(0),TweenMax.delayedCall(3,l)},l=function m(){1===t.parent.step?TweenMax.delayedCall(3,h):t.parent.step>1||TweenMax.delayedCall(3,m)};return TweenMax.delayedCall(3,l),{element:i,animate:d}};n.exports=i}),require.register("js/mansion/three/rooms/room02.js",function(e,t,n){"use strict";var o=t("./room02/riddleAnswer"),i=t("./room02/chandelier"),a=t("./room02/bird"),r=t("./room02/dogPortrait"),s=t("./room02/latern"),d=t("./room02/candles"),u={create:function(e,t){var n=new THREE.Group;this.answer=o({name:"room02_answer",width:1.5,x:5.2,y:3.7},e,t),n.add(this.answer.element),this.dud01=i({name:"room02_dud01",width:2.25,x:1.8,y:5.4},e,t),n.add(this.dud01.element),this.dud02=a({width:1.3,x:2.5,y:3,z:.1},e,t),n.add(this.dud02.element),this.dud03=r({name:"room02_dud03",width:1.3,x:3.9,y:4},e,t),n.add(this.dud03.element),this.dud04=s({name:"room02_dud04",width:.6,x:4.2,y:2.2},e,t),n.add(this.dud04.element),this.dud05=d({name:"room02_dud05",width:1.2,x:6.2,y:2.2},e,t),n.add(this.dud05.element),this.element=n},animate:function(e,t){switch(e){case"room02_answer":t&&this.answer.animate();break;case"room02_dud01":this.dud01.animate();break;case"room02_dud03":this.dud03.animate();break;case"room02_dud04":this.dud04.animate();break;case"room02_dud05":this.dud05.animate()}}};n.exports=u}),require.register("js/mansion/three/rooms/room02/bird.js",function(e,t,n){"use strict";var o=t("../../helpers/pivotBottomCenter"),i=function(e,t){function n(e){var t=new TimelineLite;return t.to(h.position,l,{x:function(){return e?"-=0.75":"+=0.75"},ease:Linear.easeNone},0),e?t.to(h.position,l,{y:"+=0.9",ease:Power2.easeOut},0):t.to(h.position,l,{y:"-=0.9",ease:Power2.easeIn},0),t.add(TweenMax.to(h.rotation,.25*l,{z:-Math.PI/64,repeat:1,yoyo:!0,ease:Linear.easeNone})),t}function i(){var e=new TimelineLite;return e.set(h.rotation,{y:"+="+Math.PI,ease:Linear.easeNone},l),e}function a(e,t){return Math.random()*(t-e+1)+e}function r(){TweenMax.delayedCall(a(8,20),function(){m.restart()})}var s=e||{},d=new THREE.Group;d.position.x=s.x||0,d.position.y=s.y||0,d.position.z=s.z||0;var u=o,c="./imgs/mansion/duds/",h=u.create(c+"bird1.png",{name:s.name,width:s.width,doubleFace:!0},t);d.add(h);var l=.25,m=new TimelineLite({onComplete:r});m.add(n()).add(i()).add(n(!0),"+=3").add(i());var p=function(){};return{element:d,animate:p}};n.exports=i}),require.register("js/mansion/three/rooms/room02/candles.js",function(e,t,n){"use strict";var o=t("../../helpers/pivotBottomCenter"),i=function a(e,t){var n=e||{},i=new THREE.Group;i.position.x=n.x||0,i.position.y=n.y||0,i.position.z=n.z||0;var r=o,s="./imgs/mansion/duds/candles/",a=r.create(s+"candles.png",{name:n.name,width:n.width,ratio:2,z:.1},t);i.add(a);var d=r.create(s+"flames.png",{width:n.width,ratio:2},t);i.add(d);var u=TweenMax.to(d.children[0].material,.25,{opacity:0,paused:!0,ease:Power1.easeInOut}),c=function(){1===u.progress()?u.reverse():u.play()};return{element:i,animate:c}};n.exports=i}),require.register("js/mansion/three/rooms/room02/chandelier.js",function(e,t,n){"use strict";var o=t("../../helpers/pivotTopCenter"),i=function a(e,t){var n=e||{},i=new THREE.Group;i.position.x=n.x||0,i.position.y=n.y||0,i.position.z=n.z||0;var r=o,s="./imgs/mansion/duds/",a=r.create(s+"chandelier.png",{name:n.name,width:n.width},t);i.add(a),CustomEase.create("chandelierEase","M0,0,C0.112,0.036,-0.016,1.086,0.2,1,0.367,0.933,0.309,-0.812,0.4,-0.91,0.484,-1,0.465,0.104,0.556,0.204,0.63,0.286,0.613,-0.062,0.7,-0.1,0.76,-0.126,0.749,0.075,0.8,0.1,0.842,0.12,0.876,-0.034,0.9,-0.034,0.924,-0.034,0.966,0,1,0");var d=function(){TweenMax.to(a.rotation,3,{z:.1*-Math.PI,ease:"chandelierEase"})};return{element:i,animate:d}};n.exports=i}),require.register("js/mansion/three/rooms/room02/dogPortrait.js",function(e,t,n){"use strict";var o=t("../../helpers/Bilboard"),i=function(e,t){var n=e||{},i=new THREE.Group;i.position.x=n.x||0,i.position.y=n.y||0,i.position.z=n.z||0;var a=o,r="./imgs/mansion/duds/",s=a.create(r+"dogPortrait.png",{name:n.name,width:n.width},t);i.add(s),CustomEase.create("dogEase","M0,0,C0.662,0.074,0.7,1,0.7,1,0.7,1,0.748,0.936,0.85,0.936,0.95,0.936,1,1,1,1");var d=new TimelineLite({paused:!0});d.to(i.position,.5,{y:"-=1.25",ease:"dogEase"});var u=function(){d.play()};return{element:i,animate:u}};n.exports=i}),require.register("js/mansion/three/rooms/room02/latern.js",function(e,t,n){"use strict";var o=t("../../helpers/pivotBottomCenter"),i=function a(e,t){var n=e||{},i=new THREE.Group;i.position.x=n.x||0,i.position.y=n.y||0,i.position.z=n.z||0;var r=o,s="./imgs/mansion/duds/lantern/",a=r.create(s+"lantern.png",{name:n.name,width:n.width,ratio:2},t);i.add(a);var d=r.create(s+"light.png",{name:n.name,width:n.width,y:.5*n.width,z:.1},t);i.add(d);var u=TweenMax.to(d.children[0].material,.25,{opacity:0,paused:!0,ease:Power1.easeInOut}),c=function(){1===u.progress()?u.reverse():u.play()};return{element:i,animate:c}};n.exports=i}),require.register("js/mansion/three/rooms/room02/riddleAnswer.js",function(e,t,n){"use strict";var o=t("../../helpers/Bilboard"),i=function(e,t){var n=e||{},i=new THREE.Group;i.position.x=n.x||0,i.position.y=n.y||0,i.position.z=n.z||0;var a=o,r="./imgs/mansion/answers/",s=a.create(r+"lionPortrait.png",{name:n.name,width:n.width},t);i.add(s);var d=function(){TweenMax.killDelayedCallsTo(l),TweenMax.killDelayedCallsTo(h),c.pause(0),TweenMax.to(s.position,1,{x:"+=1",ease:Power1.easeInOut,onComplete:t.zoomCheck,onCompleteScope:t})},u=.05,c=TweenMax.to(i.rotation,u,{z:Math.PI/64,repeat:7,repeatDelay:u,yoyo:!0,paused:!0}),h=function(){c.play(0),TweenMax.delayedCall(3,l)},l=function m(){0===t.parent.step?TweenMax.delayedCall(3,h):t.parent.step>0||TweenMax.delayedCall(3,m)};return TweenMax.delayedCall(3,l),{element:i,animate:d,nag:h}};n.exports=i}),require.register("js/mansion/three/rooms/room03.js",function(e,t,n){"use strict";var o=t("./room03/riddleAnswer"),i=t("./room03/teacups"),a=(t("./room03/chandelier"),t("./room03/chair"),t("./room03/table")),r={create:function(e,t){var n=new THREE.Group;this.answer=o({name:"room03_answer",width:1.25,x:-1.15,y:-.6},e,t),n.add(this.answer.element),this.dud01=i({name:"room03_dud01",width:2.3,x:-5.7,y:-1.35},e,t),n.add(this.dud01.element),this.dud04=a({name:"room03_dud04",width:2,x:-2.7,y:-1.4},e,t),n.add(this.dud04.element),this.element=n},animate:function(e,t){switch(e){case"room03_answer":t&&this.answer.animate();break;case"room03_dud01":this.dud01.animate();break;case"room03_dud04":this.dud04.animate()}}};n.exports=r}),require.register("js/mansion/three/rooms/room03/chair.js",function(e,t,n){"use strict";var o=t("../../helpers/Bilboard"),i=function(e,t){var n=e||{},i=new THREE.Group;i.position.x=n.x||0,i.position.y=n.y||0,i.position.z=n.z||0;var a=o,r="./imgs/mansion/duds/",s=a.create(r+"chairSmall.png",{name:n.name,width:n.width},t);i.add(s);var d=function(){TweenMax.to(s.rotation,.5,{z:Math.PI/8,repeat:1,yoyo:!0})};return{element:i,animate:d}};n.exports=i}),require.register("js/mansion/three/rooms/room03/chandelier.js",function(e,t,n){"use strict";var o=t("../../helpers/pivotTopCenter"),i=function a(e,t){var n=e||{},i=new THREE.Group;i.position.x=n.x||0,i.position.y=n.y||0,i.position.z=n.z||0;var r=o,s="./imgs/mansion/duds/",a=r.create(s+"chandelier2.png",{name:n.name,width:n.width},t);i.add(a);var d=function(){TweenMax.to(a.rotation,1,{z:.1*-Math.PI,ease:Back.easeInOut.config(.75),repeat:1,yoyo:!0})};return{element:i,animate:d}};n.exports=i}),require.register("js/mansion/three/rooms/room03/riddleAnswer.js",function(e,t,n){"use strict";var o=t("../../helpers/pivotBottomCenter"),i=function(e,t){var n=e||{},i=new THREE.Group;i.position.x=n.x||0,i.position.y=n.y||0,i.position.z=n.z||0;var a=o,r="./imgs/mansion/answers/teapot/",s=a.create(r+"teapot.png",{name:n.name,width:n.width},t);i.add(s);var d=a.create(r+"lid.png",{name:n.name,width:.5*n.width,ratio:.5,y:.7*n.width},t);i.add(d);var u=function(){TweenMax.killDelayedCallsTo(m),TweenMax.killDelayedCallsTo(l),h.pause(0),TweenMax.to(d.position,1,{y:"+=0.5",ease:Power1.easeInOut,onComplete:t.zoomCheck,onCompleteScope:t})},c=.05,h=TweenMax.to(i.rotation,c,{z:Math.PI/64,repeat:7,repeatDelay:c,yoyo:!0,paused:!0}),l=function(){h.play(0),TweenMax.delayedCall(3,m)},m=function p(){3===t.parent.step?TweenMax.delayedCall(3,l):t.parent.step>3||TweenMax.delayedCall(3,p)};return TweenMax.delayedCall(3,m),{element:i,animate:u}};n.exports=i}),require.register("js/mansion/three/rooms/room03/table.js",function(e,t,n){"use strict";var o=t("../../helpers/pivotBottomCenter"),i=function a(e,t){var n=e||{},i=new THREE.Group;i.position.x=n.x||0,i.position.y=n.y||0,i.position.z=n.z||0;var r=o,s="./imgs/mansion/duds/sweetsTable/",a=r.create(s+"table.png",{name:n.name,width:n.width},t);i.add(a);var d=r.create(s+"jellyJump.png",{name:n.name,width:.4*n.width,x:.2*-n.width,y:.75*n.width},t);i.add(d);var u=r.create(s+"iceCream.png",{name:n.name,width:.15*n.width,ratio:2,x:.21*n.width,y:.965*n.width},t);i.add(u);var c=r.create(s+"jelly.png",{name:n.name,width:.3*n.width,x:.1*n.width,y:.7*n.width,z:.01},t);i.add(c);var h=new TimelineLite({paused:!0});h.to([c.scale,d.scale,u.scale],.15,{y:.8}),h.staggerTo([c.scale,d.scale,u.scale],2,{y:1,ease:Elastic.easeOut.config(3,.1)},.075);var l=function(){h.isActive()||h.play(0)};return{element:i,animate:l}};n.exports=i}),require.register("js/mansion/three/rooms/room03/teacups.js",function(e,t,n){"use strict";var o=t("../../helpers/pivotBottomCenter"),i=function(e,t){var n=e||{},i=new THREE.Group;i.position.x=n.x||0,i.position.y=n.y||0,i.position.z=n.z||0;var a=o,r="./imgs/mansion/duds/teacup/",s=new THREE.Group,d=a.create(r+"cupBaseBack.png",{name:n.name,width:n.width,ratio:.5},t),u=a.create(r+"cupBaseFront.png",{name:n.name,width:n.width,ratio:.5,z:.05},t),c=new THREE.Group;c.position.y=.3*n.width;var h=a.create(r+"cupBack.png",{name:n.name,width:n.width,ratio:.5},t),l=a.create(r+"cupFront.png",{name:n.name,width:n.width,ratio:.5,z:.04},t),m=new THREE.Group;m.position.y=.25*n.width,m.rotation.y=Math.PI;var p=a.create(r+"cupBack.png",{name:n.name,width:n.width,ratio:.5,doubleFace:!0},t),w=a.create(r+"cupFront.png",{name:n.name,width:n.width,ratio:.5,doubleFace:!0,z:-.01},t),f=new THREE.Group;f.position.y=.21*n.width,f.rotation.y=Math.PI;var g=a.create(r+"cupBack.png",{name:n.name,width:n.width,ratio:.5,doubleFace:!0},t),v=a.create(r+"cupFront.png",{name:n.name,width:n.width,ratio:.5,doubleFace:!0},t);f.add(g),f.add(v),m.add(p),m.add(f),m.add(w),c.add(h),c.add(m),c.add(l),s.add(d),s.add(c),s.add(u),i.add(s);var y=function(e){var t=new TimelineLite;return t.staggerTo(e,1,{cycle:{z:[Math.PI/32,-Math.PI/32]},ease:Power1.easeInOut},.25),t.staggerTo(e,1,{cycle:{z:[-Math.PI/32,Math.PI/32]},ease:Power1.easeInOut},.25),t.staggerTo(e,1,{cycle:{z:[Math.PI/64,-Math.PI/64]},ease:Power1.easeInOut},.25),t.staggerTo(e,.75,{cycle:{z:[-Math.PI/64,Math.PI/64]},ease:Power1.easeInOut},.25),t.staggerTo(e,.75,{z:0,ease:Power1.easeInOut},.25),t},x=new TimelineLite({paused:!0});x.add(y([c.rotation,m.rotation,f.rotation]),0);var T=function(){x.isActive()||x.play(0)};return{element:i,animate:T}};n.exports=i}),require.register("js/mansion/three/rooms/room04.js",function(e,t,n){"use strict";var o=t("./room04/riddleAnswer"),i=t("./room04/chair"),a=t("./room04/owl"),r=t("./room04/glass"),s=t("./room04/hat"),d=(t("./room04/barrel"),{create:function(e,t){var n=new THREE.Group;this.answer=o({name:"room04_answer",width:.85,x:2.4,y:-1.3},e,t),n.add(this.answer.element),this.dud01=i({width:2.25,x:1.7,y:-.3},e,t),n.add(this.dud01.element),this.dud02=a({width:1.25,x:3.1,y:-.55,z:.1},e,t),n.add(this.dud02.element),this.dud03=r({width:1.8,x:4.3,y:-1.35},e,t),n.add(this.dud03.element),this.dud04=s({name:"room04_dud04",width:1.5,x:5.4,y:1.3,z:.1},e,t),n.add(this.dud04.element),this.element=n},animate:function(e,t){switch(e){case"room04_answer":t&&this.answer.animate();break;case"room04_dud04":this.dud04.animate()}},foundWill:function(e,t){this.answer.foundWill(e,t)}});n.exports=d}),require.register("js/mansion/three/rooms/room04/barrel.js",function(e,t,n){"use strict";var o=t("../../helpers/Bilboard"),i=function(e,t){var n=e||{},i=new THREE.Group;i.position.x=n.x||0,i.position.y=n.y||0,i.position.z=n.z||0;var a=o,r="./imgs/mansion/duds/",s=a.create(r+"tobacco.png",{name:n.name,width:n.width},t);i.add(s);var d=function(){TweenMax.to(s.rotation,.5,{z:Math.PI/8,repeat:1,yoyo:!0})};return{element:i,animate:d}};n.exports=i}),require.register("js/mansion/three/rooms/room04/chair.js",function(e,t,n){"use strict";var o=t("../../helpers/Bilboard"),i=function(e,t){var n=e||{},i=new THREE.Group;i.position.x=n.x||0,i.position.y=n.y||0,i.position.z=n.z||0;var a=o,r="./imgs/mansion/duds/",s=a.create(r+"chairGreen.png",{width:n.width},t);i.add(s);var d=function(){};return{element:i,animate:d}};n.exports=i}),require.register("js/mansion/three/rooms/room04/glass.js",function(e,t,n){"use strict";var o=t("../../helpers/pivotBottomCenter"),i=function a(e,t){function n(e,t){return Math.random()*(t-e+1)+e}function i(){TweenMax.delayedCall(n(8,20),function(){h.restart()})}var r=e||{},s=new THREE.Group;s.position.x=r.x||0,s.position.y=r.y||0,s.position.z=r.z||0;var d=o,u="./imgs/mansion/duds/",a=d.create(u+"glass.png",{name:r.name,width:r.width},t);s.add(a);var c=d.create(u+"bird3.png",{name:r.name,width:.7*r.width,y:.85*r.width},t);s.add(c);var h=new TimelineLite({onComplete:i});h.to(c.position,.5,{y:"+=1",ease:Power1.easeOut}).to(c.position,.5,{y:"-=1",ease:Power1.easeIn});var l=function(){};return{element:s,animate:l}};n.exports=i}),require.register("js/mansion/three/rooms/room04/hat.js",function(e,t,n){"use strict";var o=t("../../helpers/pivotBottomCenter"),i=function(e,t){var n=e||{},i=new THREE.Group;i.position.x=n.x||0,i.position.y=n.y||0,i.position.z=n.z||0;var a=o,r="./imgs/mansion/duds/",s=a.create(r+"tophat.png",{name:n.name,width:n.width},t);i.add(s);var d=TweenMax.to(s.rotation,.5,{z:-Math.PI/4,paused:!0,ease:Power1.easeInOut}),u=function(){1===d.progress()?d.reverse():d.play()};return{element:i,animate:u}};n.exports=i}),require.register("js/mansion/three/rooms/room04/owl.js",function(e,t,n){"use strict";var o=t("../../helpers/pivotBottomCenter"),i=function(e,t){function n(e){var t=new TimelineLite;return t.to(e,.5*l,{y:"+=0.2",ease:Power1.easeOut}).to(e,l,{y:"-=1.4",ease:Power1.easeIn}).to(e,l,{y:"+=1.3",ease:Power1.easeOut}).to(e,.5*l,{y:"-=0.2",ease:Power1.easeIn}),t}function i(e,t){return Math.random()*(t-e+1)+e}function a(){TweenMax.delayedCall(i(8,20),function(){h.restart()})}var r=e||{},s=new THREE.Group;s.position.x=r.x||0,s.position.y=r.y||0,s.position.z=r.z||0;var d=o,u="./imgs/mansion/duds/",c=d.create(u+"owl.png",{name:r.name,width:r.width,doubleFace:!0},t);s.add(c);var h=new TimelineLite({onComplete:a}),l=.25;h.set(c.rotation,{y:Math.PI}).add("Hopdown",.15).add(n(c.position),"Hopdown").to(c.position,3*l,{x:"-=1.8",ease:Linear.easeNone},"Hopdown").set(c.rotation,{y:0},"+=0.25").add("Hopup","+=0.5").to(c.position,2*l,{x:"+=1.8",ease:Linear.easeNone},"Hopup").to(c.position,l,{y:"+=1",ease:Power1.easeOut},"Hopup").to(c.position,l,{y:"-=0.9",ease:Power1.easeIn},"Hopup+="+l).add(TweenMax.to(c.rotation,.25*l,{z:-Math.PI/32,repeat:1,yoyo:!0,ease:Linear.easeNone}));var m=function(){};return{element:s,animate:m}};n.exports=i}),require.register("js/mansion/three/rooms/room04/riddleAnswer.js",function(e,t,n){"use strict";var o=t("../../helpers/pivotBottomCenter"),i=t("../../helpers/pivotTopCenter"),a=function(e,t){var n=e||{},a=new THREE.Group;a.position.x=n.x||0,a.position.y=n.y||0,a.position.z=n.z||0;var r=o,s=i,d="./imgs/mansion/answers/clock/",u=r.create(d+"will.png",{width:n.width,ratio:4},t);a.add(u);var c=r.create(d+"bottom.png",{name:n.name,width:n.width,ratio:4},t);a.add(c);var h=s.create(d+"pendulum.png",{width:.5*n.width,ratio:2,x:.05*n.width,y:2.5*n.width},t);a.add(h);var l=r.create(d+"top.png",{width:n.width,ratio:2,y:2.2*n.width,z:.1},t);a.add(l);var m=Math.PI/64;TweenMax.fromTo(h.rotation,1,{z:-m},{z:m,repeat:-1,yoyo:!0,ease:Power1.easeInOut});var p=function(){TweenMax.killDelayedCallsTo(v),TweenMax.killDelayedCallsTo(g),f.pause(0)},w=.05,f=TweenMax.to(a.position,w,{y:"+=0.05",repeat:7,repeatDelay:w,yoyo:!0,paused:!0}),g=function(){f.play(0),TweenMax.delayedCall(3,v)},v=function x(){5===t.parent.step?TweenMax.delayedCall(3,g):t.parent.step>5||TweenMax.delayedCall(3,x)};TweenMax.delayedCall(3,v);var y=function(e,t){p(),console.log("[room04] foundWill");var n=new TimelineLite({onComplete:e,onCompleteScope:t});n.to(a.position,3,{x:"-=0.5",ease:Power1.easeInOut}),n.to(u.position,1,{x:"+=0.5",y:"+=0.5",ease:Back.easeInOut.config(.5)}),n.to({},.5,{})};return{element:a,animate:p,shouldNag:v,foundWill:y}};n.exports=a}),require.register("js/mansion/three/rooms/room05.js",function(e,t,n){"use strict";var o=t("./room05/riddleAnswer"),i=t("./room05/bird"),a=t("./room05/sewingMachine"),r=t("./room05/fox"),s={create:function(e,t){var n=new THREE.Group;this.answer=o({name:"room05_answer",width:1.75,x:-5,y:-2},e,t),n.add(this.answer.element),this.dud01=a({name:"room05_dud01",width:1.15,x:-3.6,y:-5.45},e,t),n.add(this.dud01.element),this.dud02=i({width:1.3,x:-5.5,y:-4.7,z:.12},e,t),n.add(this.dud02.element),this.dud03=r({width:2,x:-1.35,y:-3.6},e,t),n.add(this.dud03.element),this.element=n},animate:function(e,t){switch(e){case"room05_answer":t&&this.answer.animate();break;case"room05_dud01":this.dud01.animate()}}};n.exports=s}),require.register("js/mansion/three/rooms/room05/bell.js",function(e,t,n){"use strict";var o=t("../../helpers/pivotTopCenter"),i=function(e,t){var n=e||{},i=new THREE.Group;i.position.x=n.x||0,i.position.y=n.y||0,i.position.z=n.z||0;var a=o,r="./imgs/mansion/answers/bell/",s=a.create(r+"back.png",{name:n.name,width:n.width},t);i.add(s);var d=a.create(r+"middle.png",{name:n.name,width:n.width},t);i.add(d);var u=a.create(r+"front.png",{name:n.name,width:n.width},t);i.add(u),CustomEase.create("bellsEase","M0,0,C0.102,0,0.07,1,0.2,1,0.328,1,0.27,-0.75,0.4,-0.75,0.524,-0.75,0.498,0.5,0.6,0.5,0.702,0.5,0.688,-0.5,0.788,-0.5,0.892,-0.5,0.9,0,1,0");var c=new TimelineLite({paused:!0});return n.direction||(n.direction=1),c.to([i.rotation,d.rotation],3,{z:function(e){return e%2?n.direction*(.07*Math.PI):n.direction*(.07*-Math.PI)},ease:"bellsEase"}),{element:i,tween:c}};n.exports=i}),require.register("js/mansion/three/rooms/room05/bird.js",function(e,t,n){"use strict";var o=t("../../helpers/Bilboard"),i=function(e,t){function n(e){var t=new TimelineLite;return t.to(h.position,l,{x:function(){return e?"-=0.75":"+=0.75"},ease:Linear.easeNone},0).to(h.position,l,{y:"+=0.3",ease:"birdEase"},0),t}function i(){var e=new TimelineLite;return e.set(h.rotation,{y:"+="+Math.PI,ease:Linear.easeNone},l),e}function a(e,t){return Math.random()*(t-e+1)+e}function r(){TweenMax.delayedCall(a(8,20),function(){m.restart()})}var s=e||{},d=new THREE.Group;d.position.x=s.x||0,d.position.y=s.y||0,d.position.z=s.z||0;var u=o,c="./imgs/mansion/duds/",h=u.create(c+"bird4.png",{name:s.name,width:s.width,doubleFace:!0},t);d.add(h),CustomEase.create("birdEase","M0,0,C0,0,0.23,1,0.5,1,0.769,1,1,0,1,0");var l=.25,m=new TimelineLite({onComplete:r});m.add(n()).add(n()).add(n()).add(i()).add(n(!0),"+=1").add(n(!0)).add(n(!0)).add(i());var p=function(){};return{element:d,animate:p}};n.exports=i}),require.register("js/mansion/three/rooms/room05/fox.js",function(e,t,n){"use strict";var o=t("../../helpers/Bilboard"),i=function(e,t){function n(e,t){return Math.random()*(t-e+1)+e}function i(){TweenMax.delayedCall(n(8,20),function(){h.restart()})}var a=e||{},r=new THREE.Group;r.position.x=a.x||0,r.position.y=a.y||0,r.position.z=a.z||0;var s=o,d="./imgs/mansion/duds/",u=s.create(d+"fox.png",{name:a.name,width:a.width},t);r.add(u);var c=function(e){var t=new TimelineLite;return t.to(u.position,.15,{y:"+="+e,ease:Power1.easeOut}),t.to(u.position,.15,{y:"-="+e,ease:Power1.easeIn}),t},h=new TimelineLite({onComplete:i});h.add(c(.1)),h.add(c(.15)),h.add(c(.2)),h.add(c(.3)),h.add(c(.4));var l=function(){h.isActive()||h.play(0)};return{element:r,animate:l}};n.exports=i}),require.register("js/mansion/three/rooms/room05/riddleAnswer.js",function(e,t,n){"use strict";var o=t("./bell"),i=function(e,t){var n=e||{},i=new THREE.Group,a=o(n,t);i.add(a.element);var r=o({name:n.name,width:.4*n.width,x:n.x+.9,y:n.y,z:n.z,direction:-1},t);i.add(r.element);var s=o({name:n.name,width:.3*n.width,x:n.x+1.5,y:n.y,z:n.z},t);i.add(s.element);var d=o({name:n.name,width:.4*n.width,x:n.x+2,y:n.y,z:n.z,direction:-1},t);i.add(d.element);var u=function(){TweenMax.killDelayedCallsTo(m),TweenMax.killDelayedCallsTo(l),h.pause(0),TweenMax.to([a.tween,d.tween,s.tween,r.tween],1,{progress:1,ease:Linear.easeNone,onComplete:t.zoomCheck,onCompleteScope:t})},c=.05,h=TweenMax.to([a.element.rotation,r.element.rotation,s.element.rotation,d.element.rotation],c,{z:function(e){return e%2?Math.PI/64:-Math.PI/64},repeat:7,repeatDelay:c,yoyo:!0,paused:!0}),l=function(){h.play(0),TweenMax.delayedCall(3,m)},m=function p(){2===t.parent.step?TweenMax.delayedCall(3,l):t.parent.step>2||TweenMax.delayedCall(3,p)};return TweenMax.delayedCall(3,m),{element:i,animate:u}};n.exports=i}),require.register("js/mansion/three/rooms/room05/sewingMachine.js",function(e,t,n){"use strict";var o=t("../../helpers/pivotBottomCenter"),i=function(e,t){var n=e||{},i=new THREE.Group;i.position.x=n.x||0,i.position.y=n.y||0,i.position.z=n.z||0;var a=o,r="./imgs/mansion/duds/sewingMachine/",s=a.create(r+"table.png",{name:n.name,width:n.width,ratio:2},t);i.add(s);var d=a.create(r+"machine.png",{name:n.name,width:2*n.width,ratio:.5,y:1.35*n.width},t);i.add(d);var u=new TimelineLite({paused:!0});u.to(d.rotation,.1,{z:Math.PI/64,ease:Linear.easeNoe}),u.to(d.rotation,.1,{z:-Math.PI/64,ease:Linear.easeNoe}),u.to(d.rotation,.1,{z:Math.PI/64,ease:Linear.easeNoe}),u.to(d.rotation,.1,{z:-Math.PI/64,ease:Linear.easeNoe}),u.to(d.rotation,.1,{z:0,ease:Linear.easeNoe});var c=function(){u.isActive()||u.play(0)};return{element:i,animate:c}};n.exports=i}),require.register("js/mansion/three/rooms/room05/wardrobe.js",function(e,t,n){"use strict";var o=t("../../helpers/Bilboard"),i=function(e,t){var n=e||{},i=new THREE.Group;i.position.x=n.x||0,i.position.y=n.y||0,i.position.z=n.z||0;var a=o,r="./imgs/mansion/duds/",s=a.create(r+"wardrobe.png",{name:n.name,width:n.width,ratio:2},t);i.add(s);var d=function(){TweenMax.to(s.rotation,.5,{z:Math.PI/8,repeat:1,yoyo:!0})};return{element:i,animate:d}};n.exports=i}),require.register("js/mansion/three/rooms/room06.js",function(e,t,n){"use strict";var o=t("./room06/bird"),i=t("./room06/bird2"),a=t("./room06/flowerPot"),r={create:function(e,t){var n=new THREE.Group;this.dud01=o({width:1.35,x:2.6,y:-4,z:.1},e,t),n.add(this.dud01.element),this.dud02=a({name:"room06_dud02",width:1.7,x:3.7,y:-5.31},e,t),n.add(this.dud02.element),this.dud03=i({width:1.3,x:6,y:-3},e,t),n.add(this.dud03.element),this.element=n},animate:function(e,t){switch(e){case"room06_dud02":this.dud02.animate()}}};n.exports=r}),require.register("js/mansion/three/rooms/room06/bird.js",function(e,t,n){"use strict";var o=t("../../helpers/pivotBottomCenter"),i=function(e,t){function n(e,t){return Math.random()*(t-e+1)+e}function i(){TweenMax.delayedCall(n(8,20),function(){c.restart()})}var a=e||{},r=new THREE.Group;r.position.x=a.x||0,r.position.y=a.y||0,r.position.z=a.z||0;var s=o,d="./imgs/mansion/duds/",u=s.create(d+"bird5.png",{name:a.name,width:a.width,doubleFace:!0},t);r.add(u);var c=new TimelineLite({onComplete:i}),h=.25;c.to(u.position,2*h,{x:"+=2.5",ease:Linear.easeNone}),c.to(u.position,h,{y:"+=1",ease:Power1.easeOut},0),c.to(u.position,h,{y:"-=0.5",ease:Power1.easeIn},h),c.add(TweenMax.to(u.rotation,.25*h,{z:-Math.PI/32,repeat:1,yoyo:!0,ease:Linear.easeNone})),c.add(TweenMax.to(u.rotation,.35*h,{z:-Math.PI/32,repeat:1,yoyo:!0,ease:Linear.easeNone}),"+=1"),c.set(u.rotation,{y:-Math.PI},"+=0.5"),c.to(u.position,2*h,{x:"-=2.5",ease:Linear.easeNone},"JumpBack"),
c.to(u.position,h,{y:"+=0.5",ease:Power1.easeOut},"JumpBack"),c.to(u.position,h,{y:"-=1",ease:Power1.easeIn},"JumpBack+="+h),c.add(TweenMax.to(u.rotation,.25*h,{z:-Math.PI/32,repeat:1,yoyo:!0,ease:Linear.easeNone})),c.set(u.rotation,{y:0},"+=0.5");var l=function(){};return{element:r,animate:l}};n.exports=i}),require.register("js/mansion/three/rooms/room06/bird2.js",function(e,t,n){"use strict";var o=t("../../helpers/pivotBottomCenter"),i=function(e,t){function n(e,t){return Math.random()*(t-e+1)+e}function i(){TweenMax.delayedCall(n(8,20),function(){c.restart()})}var a=e||{},r=new THREE.Group;r.position.x=a.x||0,r.position.y=a.y||0,r.position.z=a.z||0;var s=o,d="./imgs/mansion/duds/",u=s.create(d+"bird6.png",{name:a.name,width:a.width,doubleFace:!0},t);r.add(u);var c=new TimelineLite({onComplete:i}),h=.05;c.add(TweenMax.to(u.rotation,h,{z:-Math.PI/64,repeat:6,repeatDelay:h,yoyo:!0,ease:Linear.easeNone})),c.to(u.rotation,h,{z:0,repeat:1,yoyo:!0,ease:Linear.easeNone},"+="+h);var l=function(){};return{element:r,animate:l}};n.exports=i}),require.register("js/mansion/three/rooms/room06/flowerPot.js",function(e,t,n){"use strict";var o=t("../../helpers/pivotBottomCenter"),i=function(e,t){var n=e||{},i=new THREE.Group;i.position.x=n.x||0,i.position.y=n.y||0,i.position.z=n.z||0;var a=o,r="./imgs/mansion/duds/flowerPot/",s=a.create(r+"flower.png",{name:n.name,width:n.width,ratio:2},t);i.add(s);var d=a.create(r+"pot.png",{name:n.name,width:n.width,ratio:2},t);i.add(d);var u=new TimelineLite({paused:!0});u.to(s.position,1,{y:"-=0.35",ease:Power2.easeInOut}),u.to(s.position,1,{y:0,ease:Elastic.easeOut},"+=0.5");var c=function(){u.isActive()||u.play(0)};return{element:i,animate:c}};n.exports=i}),require.register("js/mansion/threeMansion.js",function(e,t,n){"use strict";var o=t("./throttle"),i=t("./three/ThreeBackground"),a=t("./three/ThreeHouse"),r=t("./three/ThreeAnimals"),s=t("./three/ThreeForeground"),d={_name:"threeMansion",canvas:{holder:document.getElementById("canvasHolder"),width:0,height:0,left:0,top:0},mouse:new THREE.Vector2,environment:{w:20,h:10},cameraZoom:{start:30,out:{x:0,y:0,z:25},"in":{x:3,y:3,z:10},speed:1},cameraZoomTargets:[{x:-3,y:3,z:10},{x:-3,y:-3,z:10},{x:-3,y:0,z:10},{x:3,y:0,z:10}],isZoomed:!1,count:0,shouldNag:!0,init:function(e){this.parent=e,this.throttle=o(this.resize.bind(this),50).bind(this),window.addEventListener("resize",this.throttle),this.scene=new THREE.Scene,this.renderer=new THREE.WebGLRenderer({alpha:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.resize(),this.camera=new THREE.PerspectiveCamera(50,this.canvas.width/this.canvas.height,1,1e3),this.camera.position.z=30,this.camera.setFocalLength(10),this.canvas.holder.appendChild(this.renderer.domElement),this.createBackground(),this.setupToggleZoom()},setupDraggable:function(){this.clickDelayedCall=TweenLite.delayedCall(this.doubleClickTime/1e3,this.triggerSingleClick,[],this).pause(),this.draggable=Draggable.create("#draggable",{type:"x,y",throwProps:!0,cursor:"pointer",zIndexBoost:!1,minimumMovement:8,onPress:this.onClick,onPressScope:this,onDrag:this.moveCamera,onDragScope:this,onDragEnd:function(){this.tween.kill(),TweenMax.set("#draggable",{x:0,y:0})}})},moveCamera:function(){var e=ThrowPropsPlugin.getVelocity(this.draggable[0].target,"x")/100,t=ThrowPropsPlugin.getVelocity(this.draggable[0].target,"y")/100;ThrowPropsPlugin.to(this.camera.position,{throwProps:{x:{velocity:-e,max:.25*this.environment.w,min:.25*-this.environment.w},y:{velocity:t,max:.35*this.environment.h,min:.3*-this.environment.h}},ease:Power4.easeOut})},createBackground:function(){this.bg=i(this,this.createAnimals),this.scene.add(this.bg)},createAnimals:function(){this.animals=r(this,this.createForeground),this.scene.add(this.animals)},createForeground:function(){this.fg=s(this,this.createHouse),this.scene.add(this.fg)},createHouse:function(){this.house=a,this.house.init(this,this.assetsReady),this.scene.add(this.house.elements)},assetsReady:function(){this.intro=this.introAnimation(),this.render(this.parent.initRiddles.bind(this.parent))},countReady:function(e){this.count--,0===this.count&&e&&e()},enableClick:function(){this.setupDraggable(),TweenMax.to("#zoomToggle",.5,{autoAlpha:1,ease:Power1.easeInOut}),this.nag.play(0)},disableClick:function(){this.draggable&&this.draggable[0].kill(),TweenMax.set("#draggable",{clearProps:"all"}),TweenMax.to("#zoomToggle",.5,{autoAlpha:0,ease:Power1.easeInOut}),this.nag.pause(0)},onClick:function(e){e.preventDefault(),this.mouse.x=((e.clientX||e.pageX)-this.canvas.left)/this.canvas.width*2-1,this.mouse.y=((e.clientY||e.pageY)-this.canvas.top)/this.canvas.height*-2+1,this.triggerSingleClick()},setupToggleZoom:function(){var e=document.querySelector("#zoomIn"),t=document.querySelector("#zoomOut");e.addEventListener("click",this.zoomIn.bind(this)),t.addEventListener("click",this.zoomOut.bind(this)),TweenMax.set("#zoomPointer",{rotation:"-25deg"}),this.nag=new TimelineLite({paused:!0,onComplete:this.nagZoom,onCompleteScope:this}),this.nag.to("#zoomPointer",.5,{xPercent:-25,yPercent:10,ease:Power1.easeInOut},"+=2"),this.nag.add(TweenMax.to("#zoomPointer",.5,{xPercent:0,yPercent:0,repeat:2,yoyo:!0,ease:Power1.easeIn}))},zoomIn:function(){this.shouldNag&&(this.shouldNag=!1),this.nagZoom(),TweenMax.set("#zoomIn",{autoAlpha:0}),TweenMax.set("#zoomOut",{autoAlpha:1}),this.zoom(this.cameraZoom["in"]),this.isZoomed=!0},zoomOut:function(e){TweenMax.set("#zoomIn",{autoAlpha:1}),TweenMax.set("#zoomOut",{autoAlpha:0}),this.zoom(this.cameraZoom.out,e),this.isZoomed=!1},zoom:function(e,t){TweenMax.to(this.camera.position,this.cameraZoom.speed,{x:e.x,y:e.y,z:e.z,ease:Power3.easeInOut,onComplete:function(){t===!0&&this.showAnswer()},onCompleteScope:this})},zoomCheck:function(){this.isZoomed?this.zoomOut(!0):this.showAnswer()},nagZoom:function(){this.shouldNag?this.nag.play(0):TweenMax.to("#zoomPointer",1,{autoAlpha:0,ease:Power1.easeInOut,onComplete:function(){this.nag.pause(0)},onCompleteScope:this})},showAnswer:function(){this.parent.showAnswer(),this.cameraZoom["in"]=this.cameraZoomTargets[this.parent.step]},triggerSingleClick:function(e){var t=this.userClick.click(this.mouse);t&&this.parent.handleClick(this,t)},introAnimation:function(){var e={value:10},t=new TimelineLite({paused:!0,onComplete:this.introAnimationComplete,onCompleteScope:this}),n=5;t.to(e,n,{value:30,ease:Power4.easeInOut,onUpdate:function(){this.camera.setFocalLength(e.value)},onUpdateScope:this},"Zoom"),t.fromTo(this.camera.position,n,{z:this.cameraZoom.start},{z:this.cameraZoom.out.z,ease:Power4.easeInOut},"Zoom");var o=this.scene.getObjectByName("mansionFrontLeft"),i=this.scene.getObjectByName("mansionFrontRight");return t.staggerTo([o.material,i.material],1,{opacity:0},.125),t},introAnimationComplete:function(){this.parent.introAnimationComplete(),TweenMax.staggerTo(["#zoomIn","#zoomPointer"],1,{autoAlpha:1,ease:Power1.easeInOut,onComplete:this.nagZoom,onCompleteScope:this},.15)},outroAnimation:function(){TweenMax.to(".zoomToggle",1,{autoAlpha:0,ease:Power1.easeInOut}),a.foundWill(this.stopRender,this)},childAnimation:function(e,t){this.house.childAnimation(e,t)},startRender:function(){TweenMax.ticker.addEventListener("tick",this.render,this)},stopRender:function(){console.log("[threeMansion] stop rendering",this),TweenMax.ticker.removeEventListener("tick",this.render,this),window.removeEventListener("resize",this.throttle),this.parent.parent.outroAnimation()},render:function(e){this.renderer.render(this.scene,this.camera),e&&e()},resize:function(){var e=this.canvas.holder.getBoundingClientRect();e.width>e.height?(this.canvas.width=e.width,this.canvas.height=e.height):(this.canvas.width=e.height,this.canvas.height=e.width),this.canvas.left=e.left,this.canvas.top=e.top,this.renderer.setSize(this.canvas.width,this.canvas.height)}};n.exports=d}),require.register("js/mansion/throttle.js",function(e,t,n){"use strict";function o(){return Date.now()||function(){return(new Date).getTime()}}var i=function(e,t,n){var i,a,r,s=null,d=0;n||(n={});var u=function(){d=n.leading===!1?0:o(),s=null,r=e.apply(i,a),s||(i=a=null)};return function(){var c=o();d||n.leading!==!1||(d=c);var h=t-(c-d);return i=this,a=arguments,h<=0||h>t?(s&&(clearTimeout(s),s=null),d=c,r=e.apply(i,a),s||(i=a=null)):s||n.trailing===!1||(s=setTimeout(u,h)),r}};n.exports=i}),require.alias("events/events.js","events"),require.alias("process/browser.js","process"),e=require("process"),require.register("___globals___",function(e,t,n){})}(),require("___globals___");